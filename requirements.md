## 1. Общая информация

Приложение предназначено для личного использования и позволяет отслеживать успешность инвестиций в криптовалюты на основе пользовательских транзакций.
Основные задачи:

* Ведение учёта транзакций (покупки/продажи).
* Расчёт и отображение ключевых метрик по портфелю.
* Хранение исторической динамики портфеля (с ручным пересчётом).
* Минимальный экспорт/импорт данных для бэкапа.

---

## 2. Пользователи

* Приложение однопользовательское.
* Регистрация, аутентификация и роли отсутствуют.
* Доступ должен быть защищён от случайного попадания посторонних лиц (например, базовый доступ по URL + бэкап данных).

---

## 3. Функциональные требования

### 3.1. Управление транзакциями

* Пользователь может создавать, редактировать и удалять транзакции.
* Для транзакции указываются:

  * Актив (символ токена, напр. BTC, ETH, USDT).
  * Тип операции: покупка или продажа.
  * Стоимость покупки/продажи (в USD).
  * Размер покупки/продажи (количество токенов).
  * Дата транзакции.
* Поддержка экспорта всех транзакций в CSV (бэкап).
* Поддержка импорта транзакций из CSV (если возможно экспортировать таблицу Google Docs в CSV).

### 3.2. Портфель

* Приложение рассчитывает текущее состояние портфеля на основе цепочки транзакций.
* Для каждого актива рассчитываются:

  * Средняя цена покупки.
  * Текущая цена (по CoinMarketCap API).
  * Общая стоимость актива (текущая цена × количество).
  * Вложенная сумма (сумма всех покупок данного актива минус продажи).
  * Прибыль/убыток в абсолютных значениях и в процентах:

    * относительно вложенных средств (нереализованная прибыль),
    * относительно последней транзакции.
  * Доля актива в портфеле (в процентах от общей стоимости портфеля).
* Все метрики отображаются только в USD.

### 3.3. Учёт стейблкоинов

* Стейблкоины (USDT, USDC и аналогичные) учитываются в системе как обычные активы.
* Их цена фиксируется ≈ 1 USD.
* В аналитике они отображаются в двух формах:

  1. Как активы в общей таблице портфеля.
  2. Дополнительно как "Свободные средства" (отдельная секция), чтобы отделить их от волатильных активов.
* Таким образом, пользователь видит:

  * Общую стоимость портфеля,
  * Сумму, распределённую по волатильным активам,
  * Сумму свободных стейблкоинов (кеш).

### 3.4. Историческая динамика

* Пользователь вручную запускает пересчёт кнопкой **Calculate**.
* При нажатии:

  * Выполняется запрос цен на CoinMarketCap API.
  * Пересчитываются все метрики портфеля.
  * Результаты сохраняются в историю.
* На основе истории возможно строить графики:

  * Динамика стоимости отдельных активов.
  * Динамика общей стоимости портфеля.
* Графики строятся, если есть 2 и более сохранённых точки.

---

## 4. Интерфейс

* Веб-приложение.
* Две основные страницы:

  1. Управление транзакциями.
  2. Отображение метрик и истории.
* Возможности интерфейса:

  * Сортировка транзакций по дате и активу.
  * Фильтрация транзакций по активу.
  * Отображение таблиц с ключевыми метриками портфеля.
  * Экспорт транзакций в CSV.

---

## 5. Интеграция

* CoinMarketCap API используется как единственный источник цен.
* Цены запрашиваются только в момент пересчёта (кнопка **Calculate**).
* Нет необходимости в дополнительных источниках данных.

---

## 6. Резервное копирование

* Экспорт транзакций в CSV.
* Возможность восстановить данные через импорт CSV.

---

## 7. Нефункциональные требования

* Минимальные требования к безопасности (например, простая защита доступа к странице).
* Данные пользователя должны храниться локально и не требовать внешней БД (при желании можно подключить).
* Приложение должно работать в браузере на десктопе.
* Производительность: пересчёт портфеля для 1000 транзакций должен занимать менее 2 секунд.

---

## 8. Исключения

* Уведомления (push/email) отсутствуют.
* Нет расчёта налогов.
* Нет интеграции с биржами или кошельками.
* Нет целей и сигналов для продажи/покупки.
